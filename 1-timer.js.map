{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorUrl from '../img/error.svg';\n\nconst refs = {\n  startBtn: document.querySelector('[data-start]'),\n  datetimePicker: document.querySelector('#datetime-picker'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onOpen(selectedDates, dateStr, instance) {\n    instance.input.classList.add('flatpickr-active');\n  },\n  onClose(selectedDates, dateStr, instance) {\n    instance.input.classList.remove('flatpickr-active');\n    const chosenDate = selectedDates[0];\n\n    if (chosenDate.getTime() <= Date.now()) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        progressBarColor: '#b51b1b',\n        close: true,\n        iconUrl: errorUrl,\n        class: 'my-toast',\n      });\n\n      refs.startBtn.disabled = true;\n      return;\n    }\n\n    userSelectedDate = chosenDate;\n    refs.startBtn.disabled = false;\n  },\n};\n\nlet userSelectedDate = null;\nlet timerId = null;\n\nrefs.startBtn.disabled = true;\n\nrefs.startBtn.addEventListener('click', onStartTimerClick);\n\nflatpickr(refs.datetimePicker, options);\n\nfunction onStartTimerClick() {\n  if (!userSelectedDate) return;\n\n  refs.startBtn.disabled = true;\n  refs.datetimePicker.disabled = true;\n\n  updateCountdown();\n  timerId = setInterval(updateCountdown, 1000);\n}\n\nfunction updateCountdown() {\n  const diff = userSelectedDate.getTime() - Date.now();\n\n  if (diff <= 0) {\n    clearInterval(timerId);\n\n    setTime({\n      days: 0,\n      hours: 0,\n      minutes: 0,\n      seconds: 0,\n    });\n\n    refs.datetimePicker.disabled = false;\n    refs.startBtn.disabled = true;\n\n    return;\n  }\n\n  const time = convertMs(diff);\n\n  setTime({\n    days: time.days,\n    hours: time.hours,\n    minutes: time.minutes,\n    seconds: time.seconds,\n  });\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction setTime({ days, hours, minutes, seconds }) {\n  refs.days.textContent = padZero(days);\n  refs.hours.textContent = padZero(hours);\n  refs.minutes.textContent = padZero(minutes);\n  refs.seconds.textContent = padZero(seconds);\n}\n\nfunction padZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["refs","options","selectedDates","dateStr","instance","chosenDate","iziToast","errorUrl","userSelectedDate","timerId","onStartTimerClick","flatpickr","updateCountdown","diff","setTime","time","convertMs","ms","days","hours","minutes","seconds","padZero","value"],"mappings":"0IAMA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,cAAc,EAC/C,eAAgB,SAAS,cAAc,kBAAkB,EACzD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,OAAOC,EAAeC,EAASC,EAAU,CACvCA,EAAS,MAAM,UAAU,IAAI,kBAAkB,CAChD,EACD,QAAQF,EAAeC,EAASC,EAAU,CACxCA,EAAS,MAAM,UAAU,OAAO,kBAAkB,EAClD,MAAMC,EAAaH,EAAc,CAAC,EAElC,GAAIG,EAAW,QAAO,GAAM,KAAK,IAAG,EAAI,CACtCC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,WAAY,OACZ,aAAc,OACd,iBAAkB,UAClB,MAAO,GACP,QAASC,EACT,MAAO,UACf,CAAO,EAEDP,EAAK,SAAS,SAAW,GACzB,MACD,CAEDQ,EAAmBH,EACnBL,EAAK,SAAS,SAAW,EAC1B,CACH,EAEA,IAAIQ,EAAmB,KACnBC,EAAU,KAEdT,EAAK,SAAS,SAAW,GAEzBA,EAAK,SAAS,iBAAiB,QAASU,CAAiB,EAEzDC,EAAUX,EAAK,eAAgBC,CAAO,EAEtC,SAASS,GAAoB,CACtBF,IAELR,EAAK,SAAS,SAAW,GACzBA,EAAK,eAAe,SAAW,GAE/BY,IACAH,EAAU,YAAYG,EAAiB,GAAI,EAC7C,CAEA,SAASA,GAAkB,CACzB,MAAMC,EAAOL,EAAiB,QAAS,EAAG,KAAK,IAAG,EAElD,GAAIK,GAAQ,EAAG,CACb,cAAcJ,CAAO,EAErBK,EAAQ,CACN,KAAM,EACN,MAAO,EACP,QAAS,EACT,QAAS,CACf,CAAK,EAEDd,EAAK,eAAe,SAAW,GAC/BA,EAAK,SAAS,SAAW,GAEzB,MACD,CAED,MAAMe,EAAOC,EAAUH,CAAI,EAE3BC,EAAQ,CACN,KAAMC,EAAK,KACX,MAAOA,EAAK,MACZ,QAASA,EAAK,QACd,QAASA,EAAK,OAClB,CAAG,CACH,CAEA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASP,EAAQ,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAClDrB,EAAK,KAAK,YAAcsB,EAAQJ,CAAI,EACpClB,EAAK,MAAM,YAAcsB,EAAQH,CAAK,EACtCnB,EAAK,QAAQ,YAAcsB,EAAQF,CAAO,EAC1CpB,EAAK,QAAQ,YAAcsB,EAAQD,CAAO,CAC5C,CAEA,SAASC,EAAQC,EAAO,CACtB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}